-- =============================================
-- SCRIPT GAME STRUCTURE LOGGER - DEEP SCAN
-- Mencari mob sampai ke dalam folder
-- =============================================

local player = game.Players.LocalPlayer
local replicatedStorage = game:GetService("ReplicatedStorage")
local players = game:GetService("Players")

local function logSection(title)
    print("=================================")
    print("ðŸ“‹ " .. title)
    print("=================================")
end

local function logInfo(label, value)
    print("  â€¢ " .. label .. ": " .. tostring(value))
end

local function logSuccess(label, value)
    print("  âœ… " .. label .. ": " .. tostring(value))
end

-- Fungsi scan mendalam (rekursif) untuk mencari mob
local function scanForMobs(container, depth, maxDepth)
    depth = depth or 0
    maxDepth = maxDepth or 3  -- Batasi kedalaman
    
    local mobs = {}
    local folders = {}
    
    if depth > maxDepth then return mobs, folders end
    
    for _, obj in ipairs(container:GetChildren()) do
        -- Cek apakah ini model dengan Humanoid
        if obj:IsA("Model") and obj:FindFirstChild("Humanoid") then
            if not players:GetPlayerFromCharacter(obj) then
                table.insert(mobs, {
                    name = obj.Name,
                    path = container.Name .. "/" .. obj.Name,
                    health = obj.Humanoid and obj.Humanoid.Health or "unknown",
                    rootPart = obj:FindFirstChild("HumanoidRootPart") and "ada" or "tidak ada"
                })
            end
        end
        
        -- Catat folder untuk info
        if obj:IsA("Folder") then
            table.insert(folders, obj.Name)
            -- Scan isi folder (rekursif)
            local subMobs, subFolders = scanForMobs(obj, depth + 1, maxDepth)
            for _, m in ipairs(subMobs) do
                table.insert(mobs, m)
            end
        end
    end
    
    return mobs, folders
end

-- =============================================
-- MAIN LOGGER
-- =============================================
logSection("GAME STRUCTURE LOGGER - DEEP SCAN")
logInfo("Game ID", game.PlaceId)
logInfo("Game Name", game.Name)
logInfo("Timestamp", os.date("%Y-%m-%d %H:%M:%S"))

-- =========================================
-- KARAKTER PLAYER
-- =========================================
logSection("KARAKTER PLAYER")

local character = player.Character
if character then
    logSuccess("Nama Karakter", character.Name)
    
    local rootPart = character:FindFirstChild("HumanoidRootPart") and "HumanoidRootPart" or 
                     character:FindFirstChild("Torso") and "Torso" or "tidak ditemukan"
    logSuccess("Root Part Name", rootPart)
    
    local humanoid = character:FindFirstChild("Humanoid")
    if humanoid then
        logSuccess("Humanoid", "Ditemukan")
        logInfo("Health", humanoid.Health .. "/" .. humanoid.MaxHealth)
    end
end

-- =========================================
-- SCAN SEMUA FOLDER UNTUK MOB
-- =========================================
logSection("DEEP SCAN - MOB & NPC")

local allMobs = {}
local allFolders = {}

-- Scan workspace
local workspaceMobs, workspaceFolders = scanForMobs(workspace)
for _, m in ipairs(workspaceMobs) do table.insert(allMobs, m) end
for _, f in ipairs(workspaceFolders) do table.insert(allFolders, f) end

-- Tampilkan folder yang ditemukan
if #allFolders > 0 then
    logSuccess("Folder Ditemukan", #allFolders)
    for i, folder in ipairs(allFolders) do
        print("    ðŸ“ " .. folder)
    end
else
    logInfo("Folder", "Tidak ada folder khusus")
end

-- Tampilkan mob yang ditemukan
if #allMobs > 0 then
    logSuccess("MOB DITEMUKAN!", #allMobs)
    for i, mob in ipairs(allMobs) do
        print("\n  ðŸ“ Mob #" .. i .. ":")
        print("      Nama: " .. mob.name)
        print("      Lokasi: " .. mob.path)
        print("      Health: " .. tostring(mob.health))
        print("      RootPart: " .. mob.rootPart)
    end
else
    logWarning("MOB", "TIDAK ADA MOB TERDETEKSI!")
    print("\n  âš ï¸ Kemungkinan penyebab:")
    print("    1. Mob ada di folder dengan nama berbeda")
    print("    2. Mob menggunakan struktur non-standar")
    print("    3. Area ini tidak ada mob")
end

-- =========================================
-- REMOTE EVENTS
-- =========================================
logSection("REMOTE EVENTS")

local remotes = {}
for _, obj in ipairs(replicatedStorage:GetChildren()) do
    if obj:IsA("RemoteEvent") or obj:IsA("RemoteFunction") then
        table.insert(remotes, obj.Name)
    end
end

if #remotes > 0 then
    logSuccess("Remote Ditemukan", #remotes)
    for i, remote in ipairs(remotes) do
        print("    " .. i .. ". " .. remote)
    end
else
    logInfo("Remote", "Tidak ada")
end

-- =========================================
-- READY-TO-USE CONFIG
-- =========================================
logSection("READY-TO-USE CONFIG")

print("\n-- Copy paste ini ke script Anda:\n")
print("local GAME_CONFIG = {")
print("    rootPartName = \"HumanoidRootPart\",")
print("    humanoidName = \"Humanoid\",")
print("    damageMethod = \"HEALTH_DIRECT\",")
print("    attackRemotes = {")
for i, remote in ipairs(remotes) do
    print("        \"" .. remote .. "\",")
end
print("    },")
print("    mobFolders = {")
for i, folder in ipairs(allFolders) do
    print("        \"" .. folder .. "\",")
end
print("    }")
print("}")

logSection("LOGGING COMPLETE")
print("\nâœ… Jika mob tidak terdeteksi, coba jalankan di area yang ada mob!")
